<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visita do Representante - Form&terra</title>
<style>
  body {
    margin:0;
    font-family:'Montserrat', sans-serif;
    background:#f7f7f7;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
  }
  .card {
    background:#fff;
    width:95%;
    max-width:720px;
    border-radius:12px;
    padding:24px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
  }
  h1, h2 { text-align:center; color:#125A62; margin-top:0; }
  h1 span { color:red; }
  .rep-form { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:16px; }
  .rep-form .full { grid-column:1 / -1; }
  label { font-size:13px; margin-bottom:4px; display:block; }
  input, textarea {
    width:100%;
    padding:10px;
    border:1px solid #ddd;
    border-radius:8px;
    font-size:14px;
    box-sizing:border-box;
  }
  textarea { min-height:100px; resize:vertical; }
  .note { font-size:12px; color:#777; margin-top:6px; grid-column:1/-1; }
  .actions { display:flex; justify-content:flex-end; gap:10px; margin-top:16px; grid-column:1/-1; }
  .btn { padding:10px 16px; border-radius:8px; border:none; cursor:pointer; font-weight:600; }
  .btn.close { background:#fa2b2b; color:#fcfcfc; }
  .btn.send { background:#125A62; color:#fff; }
  @media(max-width:600px){ .rep-form{ grid-template-columns:1fr; } }
</style>

<!-- EmailJS SDK -->
<script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
</head>
<body>

<div class="card">
  <h1>Você Ganhou uma Consultoria <span>Grátis</span></h1>
  <h2>Você é Lojista?</h2>
  <p style="font-weight:bold; text-align:center;">
    Temos Profissionais Treinados para te atender, em todos os sentidos: dicas de produtos, tipos de ambiente, sites, loja virtual. Solicite a visita de um Representante Gratuitamente e ganhe uma Consultoria.
  </p>
  <h2>Solicitar visita do representante Grátis</h2>
  <p style="font-weight:bold; text-align:center;">
    Preencha os dados abaixo se desejar que um representante Form&terra entre em contato. Nenhum campo é obrigatório.
  </p>

  <form id="repForm" class="rep-form">
    <div class="full">
      <label>Nome</label>
      <input type="text" name="nome" placeholder="Nome ou nome da loja">
    </div>
    <div>
      <label>Telefone</label>
      <input type="tel" name="telefone" id="telefone" placeholder="(00) 00000-0000" maxlength="15">
    </div>
    <div>
      <label>E-mail</label>
      <input type="email" name="email" placeholder="contato@loja.com">
    </div>
    <div class="full">
      <label>Município</label>
      <input type="text" name="cidade" placeholder="Ex: Santa Gertrudes - SP">
    </div>
    <div class="full">
      <label>Mensagem</label>
      <textarea name="mensagem" placeholder="Ex: interesse em vasos grandes, atacado..."></textarea>
    </div>
    <div class="note">Nenhum campo é obrigatório — preencha apenas o que preferir.</div>

    <div class="actions">
      <button type="button" class="btn close" id="closeBtn">Não tenho interesse, ir para o Site Form&terra</button>
      <button type="submit" class="btn send" id="sendBtn">Enviar</button>
    </div>
  </form>
</div>

<script>
// Inicializa EmailJS
emailjs.init("RwT4JVStkVV8WYvvf"); // substitua pela sua public key

const form = document.getElementById('repForm');
const sendBtn = document.getElementById('sendBtn');
const closeBtn = document.getElementById('closeBtn');

// Redirecionar
closeBtn.addEventListener('click', () => {
  window.location.href = "index";
});

// Máscara de telefone
const telefoneInput = document.getElementById('telefone');
telefoneInput.addEventListener('input', (e) => {
  let v = e.target.value.replace(/\D/g, '');
  if(v.length > 11) v = v.slice(0,11);
  v = v.replace(/^(\d{2})(\d)/g, '($1) $2');
  v = v.replace(/(\d{5})(\d{1,4})$/, '$1-$2');
  e.target.value = v;
});

// Envio via EmailJS
form.addEventListener('submit', (ev) => {
  ev.preventDefault();
  sendBtn.disabled = true;
  sendBtn.textContent = "Enviando...";

  const templateParams = {
    nome: form.nome.value || '-',
    telefone: form.telefone.value || '-',
    email: form.email.value || '-',
    cidade: form.cidade.value || '-',
    mensagem: form.mensagem.value || '-'
  };

  emailjs.send("service_h3qdq56","template_cz2ujaq", templateParams)
    .then(function(response) {
      sendBtn.textContent = "Sucesso! Um representante entrará em contato em breve. Obrigado!";
      sendBtn.style.background = "#28a745";
      setTimeout(() => { window.location.href = "index"; }, 3000);
    }, function(error) {
      console.error("Erro EmailJS:", error);
      alert("O envio falhou, tente novamente!");
      sendBtn.disabled = false;
      sendBtn.textContent = "Enviar";
    });
});
</script>

</body>
</html>
