<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visita do Representante - Form&terra</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">

<style>
  body {
    margin:0;
    font-family:'Lato', sans-serif;
    background:#f7f7f7;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    padding: 20px;
  }
  .card {
    background:#fff;
    width:100%;
    max-width:720px;
    border-radius:12px;
    padding:24px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
  }
  h1, h2 { text-align:center; color:#125A62; margin-top:0; }
  h1 span { color:red; }
  form { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:16px; }
  .full { grid-column:1 / -1; }
  label { font-size:13px; margin-bottom:4px; display:block; color:#333; }
  input, textarea, select {
    width:100%;
    padding:10px;
    border:1px solid #ddd;
    border-radius:8px;
    font-size:14px;
    box-sizing:border-box;
  }
  textarea { min-height:100px; resize:vertical; }
  .actions { display:flex; justify-content:flex-end; gap:10px; margin-top:16px; grid-column:1/-1; }
  .btn { padding:10px 16px; border-radius:8px; border:none; cursor:pointer; font-weight:600; }
  .btn.close { background:#fa2b2b; color:#fff; }
  .btn.send { background:#125A62; color:#fff; }
  .note { font-size:12px; color:#777; grid-column:1/-1; }
  label.error { color:#DC3543; font-size:12px; margin-top:3px; }
  @media(max-width:600px){ form{ grid-template-columns:1fr; } }
</style>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://d335luupugsy2.cloudfront.net/js/jquery.validate/1.9/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>emailjs.init("RwT4JVStkVV8WYvvf");</script>
</head>

<body>
<div class="card">
  <h1>Você Ganhou uma Consultoria <span>Grátis</span></h1>
  <h2>Você é Lojista?</h2>
  <p style="text-align:center; font-weight:bold;">
    Temos profissionais treinados para te atender, dar dicas de produtos, tipos de ambiente, sites e loja virtual. Solicite a visita de um representante gratuitamente e ganhe uma consultoria.
  </p>
  <h2>Solicitar visita do representante</h2>
  <p style="text-align:center; font-weight:bold;">
    Preencha os dados abaixo. Nenhum campo é obrigatório.
  </p>

  <form id="repForm">
    <div class="full">
      <label for="nome">Nome</label>
      <input type="text" id="nome" name="nome" placeholder="Nome ou nome da loja">
    </div>
    <div>
      <label for="telefone">Telefone</label>
      <input type="tel" id="telefone" name="telefone" placeholder="(00) 00000-0000">
    </div>
    <div>
      <label for="email">E-mail</label>
      <input type="email" id="email" name="email" placeholder="contato@loja.com">
    </div>
    <div class="full">
      <label for="cidade">Município</label>
      <input type="text" id="cidade" name="cidade" placeholder="Ex: Santa Gertrudes - SP">
    </div>
    <div class="full">
      <label for="mensagem">Mensagem</label>
      <textarea id="mensagem" name="mensagem" placeholder="Ex: interesse em vasos grandes, atacado..."></textarea>
    </div>
    <div class="note">Nenhum campo é obrigatório — preencha apenas o que preferir.</div>

    <div class="actions">
      <button type="button" class="btn close" id="closeBtn">Não tenho interesse, ir para o site</button>
      <button type="submit" class="btn send" id="sendBtn">Enviar</button>
    </div>
  </form>
</div>

<script>
$(document).ready(function(){
  // Máscara de telefone
  $('#telefone').mask('(00) 00000-0000');

  // Redirecionar
  $('#closeBtn').click(()=> window.location.href="https://www.formeterra.com.br/");

  // Validação e envio
  $("#repForm").validate({
    rules:{
      nome: { minlength: 2 },
      email: { email: true },
      telefone: { minlength: 14 }
    },
    messages:{
      nome: "Informe seu nome",
      email: "Digite um e-mail válido",
      telefone: "Informe um telefone válido"
    },
    submitHandler: function(formElement){
      const formData = {
        nome: $("#nome").val() || '-',
        telefone: $("#telefone").val() || '-',
        email: $("#email").val() || '-',
        cidade: $("#cidade").val() || '-',
        mensagem: $("#mensagem").val() || '-'
      };

      $("#sendBtn").prop("disabled", true).text("Enviando...");

      emailjs.send("service_h3qdq56","template_cz2ujaq", formData)
    .then(function(response){
      alert("✅ Formulário enviado! Um representante entrará em contato em breve.");
      formElement.reset();
      $("#sendBtn").prop("disabled", false).text("Enviar");
      // Redireciona para o site após o envio
      window.location.href = "https://www.formeterra.com.br/";
    }, function(error){
      console.error("Erro EmailJS:", error);
      alert("❌ Falha ao enviar. Tente novamente.");
      $("#sendBtn").prop("disabled", false).text("Enviar");
    });

    }
  });
});
</script>
</body>
</html>
